#!/usr/bin/env ruby

require "rocket_api"

include RocketApi::Validation
include RocketApi::Lib

safe("RocketApi") do
  commands = apply_commands(ARGV)

  raise RocketApi::COMMANDS_IS_NOT_AVAILABLE unless commands.is_valid?

  check_possibility_to_init_dir

  RocketApi::AVAILABLE_COMMANDS[commands.init][commands.app].each do |key, collection|
    RocketApi::RocketCommands.send(key, collection: collection, project_name: commands.name )
  end
end